<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RelógiosSmartwatch</title>
    <!-- Links atualizados para a pasta static -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
<body>

    <!-- Cabeçalho -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <!-- Link da imagem atualizado -->
                    <img src="{{ url_for('static', filename='img/techtime.jpg') }}" alt="TechTime" class="header-logo-img">
                    Tech<span>Time</span>
                </div>
                <nav>
                    <div class="cart-trigger" onclick="toggleCart()">
                        <i class="ph ph-shopping-cart"></i>
                        <span id="cart-count">0</span>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container hero-content">
            <h1>Tempo é Preciosidade</h1>
            <p>Descubra a elegância em cada segundo com nossa coleção exclusiva.</p>
            <a href="#produtos" class="btn-cta">Ver Coleção</a>
        </div>
    </section>

    <!-- Produtos (GERADO PELO PYTHON) -->
    <section id="produtos" class="products-section container">
        <h2>Coleção Smartwatch</h2>
        <div class="products-grid" id="products-grid">
            {% for product in products %}
            <div class="product-card" style="animation-delay: {{ loop.index0 * 0.1 }}s">
                <div class="card-image-container">
                    <span class="badge-offer">OFERTA</span>
                    <span class="badge-free-shipping">FRETE GRÁTIS</span>
                    <img src="{{ product.image }}" alt="{{ product.name }}" class="product-img">
                </div>
                <div class="product-info">
                    <h3>{{ product.name }}</h3>
                    <span class="product-price">R$ {{ "%.2f"|format(product.price)|replace('.', ',') }}</span>
                    <!-- Passamos o ID para o JS adicionar ao carrinho -->
                    <button class="btn-add" onclick="addToCart({{ product.id }})">Adicionar ao Carrinho</button>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Avaliações de Clientes -->
    <section class="testimonials-section">
        <div class="container">
            <h2>O Que Dizem Nossos Clientes</h2>
            <div class="testimonials-carousel" id="testimonials-carousel">
                <div class="testimonial-card">
                    <div class="client-info">
                        <div class="client-avatar"><i class="ph ph-user"></i></div>
                        <div class="client-details">
                            <h3>Carlos Oliveira</h3>
                            <div class="stars"><i class="ph-fill ph-star"></i><i class="ph-fill ph-star"></i><i class="ph-fill ph-star"></i><i class="ph-fill ph-star"></i><i class="ph-fill ph-star"></i></div>
                        </div>
                    </div>
                    <p class="testimonial-text">"Excelente relógio! Chegou muito rápido e a qualidade é impressionante. Recomendo a todos!"</p>
                </div>
                <!-- Mais avaliações podem ser adicionadas aqui ou vindas do Python futuramente -->
                 <div class="testimonial-card">
                    <div class="client-info">
                        <div class="client-avatar" style="background-color: #ff9f43;">
                            <i class="ph ph-user"></i>
                        </div>
                        <div class="client-details">
                            <h3>Ana Souza</h3>
                            <div class="stars">
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-fill ph-star"></i>
                            </div>
                        </div>
                    </div>
                    <p class="testimonial-text">"Estou apaixonada pelo meu novo smartwatch. Funções incríveis e muito bonito no pulso."</p>
                </div>
                 <div class="testimonial-card">
                    <div class="client-info">
                        <div class="client-avatar" style="background-color: #ee5253;">
                            <i class="ph ph-user"></i>
                        </div>
                        <div class="client-details">
                            <h3>Marcos Lima</h3>
                            <div class="stars">
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-fill ph-star"></i>
                                <i class="ph-bold ph-star"></i>
                            </div>
                        </div>
                    </div>
                    <p class="testimonial-text">"Atendimento nota 10! Tive uma dúvida na configuração e o suporte me ajudou prontamente."</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Mapa -->
    <section class="map-section">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3657.2673721326!2d-46.6349926!3d-23.5441044!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce58532906e537%3A0x6d9f8645e54d830!2sR.%2025%20de%20Mar%C3%A7o%20-%20Centro%20Hist%C3%B3rico%20de%20S%C3%A3o%20Paulo%2C%20S%C3%A3o%20Paulo%20-%20SP!5e0!3m2!1spt-BR!2sbr!4v1703698000000!5m2!1spt-BR!2sbr" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container footer-container">
            <div class="footer-col">
                <div class="logo">Tech<span>Time</span></div>
                <p class="footer-desc">Sua loja de confiança para relógios de Smartwatch.</p>
            </div>
            <div class="footer-col">
                <h4>Localização</h4>
                <address><i class="ph ph-map-pin"></i> Rua 25 de Março, 1100, SP</address>
            </div>
            <div class="footer-col">
                <h4>Formas de Pagamento</h4>
                <div class="payment-methods">
                    <div class="payment-icon pix"><i class="ph ph-pix-logo"></i><span>PIX</span></div>
                    <img src="{{ url_for('static', filename='img/logosafe.png') }}" alt="Selo de Segurança" class="logo-safe">
                </div>
            </div>
        </div>
        <div class="footer-bottom"><div class="container"><p>&copy; 2025 Relógios Exclusive.</p></div></div>
    </footer>

    <!-- Modal Carrinho -->
    <div class="cart-overlay" id="cart-overlay">
        <div class="cart-sidebar">
            <div class="cart-header">
                <h3>Seu Carrinho</h3>
                <button onclick="toggleCart()"><i class="ph ph-x"></i></button>
            </div>
            <div class="cart-items" id="cart-items"><p class="empty-msg">Seu carrinho está vazio.</p></div>
            <div class="cart-footer">
                <div class="cart-total"><span>Total:</span><span id="cart-total-price">R$ 0,00</span></div>
                <button class="btn-checkout" onclick="openCheckout()">Finalizar Compra</button>
            </div>
        </div>
    </div>

    <!-- Modal Checkout -->
    <div class="checkout-modal" id="checkout-modal">
        <div class="checkout-content">
            <div class="checkout-header">
                <h3>Finalizar Pagamento</h3>
                <button onclick="closeCheckout()"><i class="ph ph-x"></i></button>
            </div>
            <div class="checkout-body">
                <div class="payment-summary">
                    <h4>Resumo do Pedido</h4>
                    <p>Total a pagar: <strong id="checkout-total">R$ 0,00</strong></p>
                </div>
                <div class="customer-form">
                    <h4>Dados Pessoais e Entrega</h4>
                    <div class="form-group"><label>Nome Completo</label><input type="text" id="cust-name" placeholder="Seu nome completo"></div>
                    <div class="form-group"><label>CPF</label><input type="text" id="cust-cpf" placeholder="000.000.000-00"></div>
                    
                    <div class="form-group"><label>CEP</label><input type="text" id="cust-cep" placeholder="00000-000"></div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div class="form-group" style="flex: 2;"><label>Endereço</label><input type="text" id="cust-address" placeholder="Rua, Avenida..."></div>
                        <div class="form-group" style="flex: 1;"><label>Número</label><input type="text" id="cust-number" placeholder="123"></div>
                    </div>
                    <div class="form-group"><label>Complemento</label><input type="text" id="cust-complement" placeholder="Apto, Bloco (Opcional)"></div>
                    <div class="form-group"><label>Bairro</label><input type="text" id="cust-district" placeholder="Bairro"></div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div class="form-group" style="flex: 3;"><label>Cidade</label><input type="text" id="cust-city" placeholder="Cidade"></div>
                        <div class="form-group" style="flex: 1;"><label>Estado</label><input type="text" id="cust-state" placeholder="UF"></div>
                    </div>
                </div>
                <div class="payment-method">
                    <div class="pix-badge"><i class="ph ph-pix-logo"></i> Pagamento via PIX</div>
                    <div class="qr-code-placeholder"><img src="https://placehold.co/200x200/000000/FFF?text=QR+CODE+PIX" alt="Pix"></div>
                    <div class="copy-paste-container">
                        <input type="text" value="00020126360014BR.GOV.BCB.PIX..." id="pix-code" readonly>
                        <button onclick="copyPix()">Copiar</button>
                    </div>
                    <div class="gateway-status" id="gateway-status">Aguardando...</div>
                </div>
                <button class="btn-confirm-payment" onclick="processPayment()">Confirmar Pagamento</button>
            </div>
        </div>
    </div>

    <!-- Alerta de Bônus -->
    <div id="bonus-alert" class="bonus-alert">
        <div class="bonus-content">
            <div class="bonus-text">
                <i class="ph-fill ph-ticket"></i>
                <div class="bonus-text-col"><span>OFERTA RELÂMPAGO!</span><small>10% OFF agora!</small></div>
            </div>
            <div class="bonus-timer-container"><span id="bonus-timer">05:00</span></div>
            <button class="btn-close-bonus" onclick="closeBonus()"><i class="ph ph-x"></i></button>
        </div>
        <div class="progress-bar-container"><div class="progress-bar" id="bonus-progress"></div></div>
    </div>

    <!-- Chat Widget -->
    <div class="chat-widget">
        <button class="chat-toggle" onclick="toggleChatWidget()"><i class="ph ph-chat-circle-dots"></i><span class="chat-notification">1</span></button>
        <div class="chat-window" id="chat-window">
            <div class="chat-header">
                <div class="chat-header-info"><i class="ph ph-headset"></i><span>Suporte</span></div>
                <button onclick="toggleChatWidget()"><i class="ph ph-x"></i></button>
            </div>
            <div class="chat-messages" id="chat-messages"><div class="message bot"><p>Olá! Como posso ajudar?</p></div></div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Digite..." onkeypress="handleChatKey(event)">
                <button onclick="sendChatMessage()"><i class="ph ph-paper-plane-right"></i></button>
            </div>
        </div>
    </div>

    <!-- Passando dados do Python para o JS -->
    <script>
        // O Flask converte a lista Python em JSON para o JavaScript usar
        const products = {{ products | tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
